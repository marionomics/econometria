

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>El modelo de resultados potenciales &#8212; Econometría e Inferencia Causal con ejemplos en Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/I-Introduccion/02-El-modelo-de-resultados-potenciales';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Si sólo aprendes un modelo, aprende este: Regresión Lineal" href="../II-Modelos-y-Metodos/03-Regresion-Lineal.html" />
    <link rel="prev" title="Python para Econometría" href="01-python-para-econometria.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/Metrics4Blogo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/Metrics4Blogo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Metrics 4 Business
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">I Introducción</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-python-para-econometria.html">Python para Econometría</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">El modelo de resultados potenciales</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">II Modelos y Métodos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../II-Modelos-y-Metodos/03-Regresion-Lineal.html">Si sólo aprendes un modelo, aprende este: Regresión Lineal</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Recursos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../III-Recursos/04-ejercicios.html">Ejercicios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../III-Recursos/05-Referencias.html">50 Referencias de Econometría</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/marionomics/econometria" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/marionomics/econometria/issues/new?title=Issue%20on%20page%20%2Fchapters/I-Introduccion/02-El-modelo-de-resultados-potenciales.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/chapters/I-Introduccion/02-El-modelo-de-resultados-potenciales.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>El modelo de resultados potenciales</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#en-un-universo-fuiste-a-harvard">En un universo, fuiste a Harvard</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-error-de-novatos">El error de novatos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sesgo-de-seleccion">Sesgo de Selección</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rockstars-de-la-economia-alan-krueger">Rockstars de la economía: Alan Krueger</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-beneficio-de-entrar-a-una-escuela-mas-selectiva">El beneficio de entrar a una escuela más selectiva</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#descubriendo-el-sesgo-de-seleccion">Descubriendo el sesgo de selección</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-experimento-aleatorio-ideal">El experimento aleatorio ideal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experimento-ideal-y-experimentos-naturales">Experimento ideal y experimentos naturales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#disena-tu-experimento-ideal-con-inteligencia-artificial">Diseña tu experimento ideal con Inteligencia Artificial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apendice">Apéndice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notacion">Notación</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias">Referencias</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="el-modelo-de-resultados-potenciales">
<h1>El modelo de resultados potenciales<a class="headerlink" href="#el-modelo-de-resultados-potenciales" title="Permalink to this heading">#</a></h1>
<p>Para entender la econometría necesitas comprender el multiverso.</p>
<p>El multiverso se basa en la interpretación de Hughes Everett (1957) de la mecánica cuántica (Busch, <em>et al</em>., 2007). Pero la interpretación popular es que cada decisión que tomamos genera un universo nuevo.</p>
<p>Hay un universo en el que aún estás con tu ex.</p>
<p>Le vamos a llamar a ese universo un <strong>contrafactual</strong>, porque se opone a la realidad. Naturalmente, el hubiera no existe y no podemos obtener datos de los contrafactuales. Sólo podemos imaginarlo.</p>
<section id="en-un-universo-fuiste-a-harvard">
<h2>En un universo, fuiste a Harvard<a class="headerlink" href="#en-un-universo-fuiste-a-harvard" title="Permalink to this heading">#</a></h2>
<p>¿Habrías tenido mejor vida si hubieras atendido clases en Harvard?</p>
<p>Medir la felicidad en la vida es muy difícil. Nos tendremos que conformar con tus ingresos. ¿Tendrías hoy mejores ingresos si hubieras ido a Harvard?</p>
<p>No podemos comparar los ingresos de un egresado de Harvard con alguien que no fue. Los estudiantes de Harvard tienen (suponemos) más ingresos, mejores conexiones y un estilo de vida diferente a los que no asistieron. Decimos a esto que son <strong>fundamentalmente</strong> diferentes.</p>
</section>
<section id="el-error-de-novatos">
<h2>El error de novatos<a class="headerlink" href="#el-error-de-novatos" title="Permalink to this heading">#</a></h2>
<p>Si cometes este error estás <em>banneado</em> de por vida de mi clase.</p>
<p>Supongamos que deseas saber el <strong>efecto</strong> que tiene entrar en una escuela más selectiva en los ingresos. Decides entonces que es buena idea evaluar la diferencia entre los ingresos de las personas que fueron a una escuela selectiva y los egresados de una no selectiva.</p>
<div class="math notranslate nohighlight">
\[
E[Y_1]-E[Y_0]
\]</div>
<p>La <span class="math notranslate nohighlight">\(E\)</span> denota la <strong>esperanza</strong> o valor esperado de lo que está entre paréntesis. Normalmente denotamos con <span class="math notranslate nohighlight">\(Y\)</span> el <strong>resultado</strong> o la variable en la que esperamos ver un efecto. En este caso es el ingreso.</p>
<p>El subíndice <span class="math notranslate nohighlight">\(1\)</span> o <span class="math notranslate nohighlight">\(0\)</span> nos indica el <strong>grupo</strong> al que pertenece la variable. Normalmente <span class="math notranslate nohighlight">\(1\)</span> indica el <strong>grupo de tratamiento</strong> y <span class="math notranslate nohighlight">\(0\)</span> el <strong>grupo de control</strong>.</p>
<p>Tratamiento y control son parte del lenguaje en los estudios clínicos. Cuando quieres hacer un experimento para saber si una medicina funciona, divides a tus sujetos en dos grupos y a uno le aplicas la medicina y al otro no. Luego mides los resultados.</p>
<p>Imaginemos que esta base de datos identifica a 180 alumnos, la mitad de ellos entró a una escuela selectiva y la otra mitad no lo hizo. ¿Cuál es el valor que representa la ecuación de arriba?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># Creando un diccionario con &#39;id&#39; como claves y range(179) como valores</span>
<span class="n">alumnos</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">180</span><span class="p">))}</span>

<span class="c1"># Creando el DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">alumnos</span><span class="p">)</span>

<span class="c1"># La semilla ayuda a tener el mismo resultado</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># La habilidad es aleatoria. </span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;habilidad&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))]</span>
<span class="n">ruido_habilidad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># Añadiendo la columna &#39;selectivas&#39; con una elección aleatoria de 0 o 1 para cada fila</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;selectivas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;habilidad&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">ruido_habilidad</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>


<span class="c1"># Añadiendo la columna &#39;ingresos&#39; con el cálculo especificado</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;ingresos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;selectivas&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;habilidad&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">280</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># Mostrando las primeras filas del DataFrame</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>habilidad</th>
      <th>selectivas</th>
      <th>ingresos</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0.496714</td>
      <td>1</td>
      <td>1519.595562</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>-0.138264</td>
      <td>0</td>
      <td>1394.600820</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>0.647689</td>
      <td>0</td>
      <td>1131.469293</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>1.523030</td>
      <td>1</td>
      <td>1743.236746</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>-0.234153</td>
      <td>0</td>
      <td>1134.701974</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El código de arriba le podrá dar una pista a los más avanzados del problema. Los ingresos en esta tabla dependen de asistir a una escuela selectiva. Veamos la diferencia de promedios.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;selectivas&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;ingresos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;selectivas&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s1">&#39;ingresos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>676.1391841200148
</pre></div>
</div>
</div>
</div>
<p>Los datos nos dicen que hay una diferencia de 676 (digamos que son miles de) dólares. ¿Es esto cierto?</p>
</section>
<section id="sesgo-de-seleccion">
<h2>Sesgo de Selección<a class="headerlink" href="#sesgo-de-seleccion" title="Permalink to this heading">#</a></h2>
<p>La comparación que hicimos tiene un problema. ¿Lo notaste?</p>
<p>Los estudiantes de escuelas selectivas son <strong>fundamentalmente diferentes</strong> a los que no asisten a este tipo de instituciones. Lo podemos observar en la línea en la que creamos la <strong>dummy</strong> de personas que entraron a escuelas selectivas.</p>
<p>Los egresados de escuelas selectivas tienen padres con mayores ingresos en promedio.</p>
<p>Los ingresos de los padres influyen en la alimentación, el acceso a cuidados, la educación extracurricular y otros aspectos que traen más posibilidades de entrar a la universidad.</p>
<p>Se le conoce como sesgo de selección.</p>
<p><a class="reference download internal" download="" href="../../_downloads/9361b79bce49925d5b25ff3c89dedca9/sesgo_seleccion.png"><span class="xref download myst">Sesgo de seleccion</span></a></p>
<p>En otras palabras, si vas a una zona rica en Nueva York tendrás más probabilidad de encontrar a un futuro estudiante de Harvard que si vas a una zona pobre en Puerto Rico (el territorio con tasa de pobreza más alta en EE.UU.).</p>
</section>
<section id="rockstars-de-la-economia-alan-krueger">
<h2>Rockstars de la economía: Alan Krueger<a class="headerlink" href="#rockstars-de-la-economia-alan-krueger" title="Permalink to this heading">#</a></h2>
<p>Alan Krueger fue una leyenda de la economía.</p>
<p>Fue un destacado académico, y secretario asistente del Tesoro para la política económica en la administración de Barack Obama. Fue autor de múltiples artículos influyentes donde innovó en el uso de <strong>experimentos naturales</strong>.</p>
<p>Krueger falleció en su casa en Marzo de 2019.</p>
<p>Su coautor David Card comentó en 2021 que, de haber estado vivo, no había lugar a dudas de que habría compartido con él el premio Nobel de Economía de ese año.</p>
</section>
<section id="el-beneficio-de-entrar-a-una-escuela-mas-selectiva">
<h2>El beneficio de entrar a una escuela más selectiva<a class="headerlink" href="#el-beneficio-de-entrar-a-una-escuela-mas-selectiva" title="Permalink to this heading">#</a></h2>
<p>El artículo de Krueger es un gran ejemplo de sesgo de selección y cómo evitarlo.</p>
<p>La comparación no debe ser entre aquellos que entraron a escuelas selectivas y los que no. La comparación debe ser a <strong>las mismas personas en universos paralelos</strong>.</p>
<p>Imaginemos que Alicia logró entrar a Harvard, pero Bernardo no. Alicia sabe tres idiomas, tuvo tutorías personalizadas durante la preparatoria y pasaba las tardes en clases extracurriculares. Bernardo trabaja por las tardes para apoyar a su familia, tiene buenas calificaciones, pero no ha tomado tutorías extra. Alicia tiene computadora en casa y buen acceso a internet, Bernardo tiene una computadora descompuesta y no hay internet en su casa.</p>
<p><strong>No podemos comparar a Alicia con Bernardo y pensar que las diferencias en sus ingresos vienen de su inscripción a Harvard.</strong></p>
<p>Lo ideal sería comparar a Alicia en el universo 1, donde si entró a Harvard, con Alicia del universo 0, donde no entró a Harvard. Digamos que <span class="math notranslate nohighlight">\(Y_i\)</span> son los ingresos de Alicia. Podemos incluir un subíndice más para indicar el universo.</p>
<p><span class="math notranslate nohighlight">\(Y_{1i}\)</span> indica los ingresos de Alicia en el universo 1 y <span class="math notranslate nohighlight">\(Y_{0i}\)</span> en el universo 0.</p>
<p>Finalmente, <span class="math notranslate nohighlight">\(D_i\)</span> es una <strong>dummy</strong> que indica si Alicia entró a Harvard (<span class="math notranslate nohighlight">\(D_i = 1\)</span>) o no (<span class="math notranslate nohighlight">\(D_i =0\)</span>).</p>
<p>El ingreso de Alicia entonces es</p>
<div class="math notranslate nohighlight">
\[\begin{split}
Y_i = \begin{cases} Y_{1i} \qquad \text{si } D_i=1\\ Y_{0i} \qquad \text{si } D_i=0\end{cases}
\end{split}\]</div>
<p>El ingreso de Alicia en el universo 0 no lo podemos observar, pues está en otro universo donde ella no entró a Harvard. Aún así podemos denotar el efecto de haber entrado a esa universidad en sus ingresos como <span class="math notranslate nohighlight">\(Y_{1i} -Y_{0i}\)</span>, por lo tanto el ingreso de Alicia en función de <span class="math notranslate nohighlight">\(D_i\)</span> sería</p>
<div class="math notranslate nohighlight">
\[
Y_i = Y_{0i} + D_i(Y_{1i} - Y_{0i})
\]</div>
<p>Escribir este efecto aún cuando no se puede observar es un ejercicio que nos ayuda a entender el sesgo que se genera al comparar grupos diferentes.</p>
<p>Cuando <span class="math notranslate nohighlight">\(D_i = 1\)</span>, los ingresos de Alicia son <span class="math notranslate nohighlight">\(Y_{1i}\)</span> y cuando <span class="math notranslate nohighlight">\(D_i = 0\)</span> sus ingresos son <span class="math notranslate nohighlight">\(Y_{0i}\)</span>. Para observar esto no se necesita imaginación. Pero <span class="math notranslate nohighlight">\(E[Y_{0i} | D_i = 1]\)</span> es un <strong>contrafactual</strong>, es algo que no pasó, pero que podría pasar. Son los ingresos de todas las personas en situación similar a la de Alicia (<span class="math notranslate nohighlight">\(D_i = 1\)</span>), <strong>si no hubiéran entrado a Harvard</strong>.</p>
</section>
<section id="descubriendo-el-sesgo-de-seleccion">
<h2>Descubriendo el sesgo de selección<a class="headerlink" href="#descubriendo-el-sesgo-de-seleccion" title="Permalink to this heading">#</a></h2>
<p>Hagamos un truco. Nota que</p>
<div class="math notranslate nohighlight">
\[
E[Y_1]-E[Y_0] = E[Y_{1i} | D_i = 1] - E[Y_{0i} | D_i = 0]
\]</div>
<p>Son los ingresos observados. Pero lo que realmente necesitamos comparar es</p>
<div class="math notranslate nohighlight">
\[
E[Y_{1i} | D_i = 1] - E[Y_{0i} | D_i = 1]
\]</div>
<p>Se le llama el tratamiento promedio en el tratado. En inglés es <em>Average treatment on the treated</em> y lo verás con las siglas ATT.</p>
<p>La ecuación es diferente a la que comenzamos. La diferencia es sutil. Nota que <span class="math notranslate nohighlight">\(E[Y_{0i} | D_i = 1]\)</span> es un contrafactual. Son los ingresos que tendrían las personas que entraron a Harvard si no hubieran entrado. Si pudiéramos introducirlas en la ecuación 1, tendríamos dos partes:</p>
<div class="math notranslate nohighlight">
\[
E[Y_{i} | D_i = 1] - E[Y_{i} | D_i = 0] = \underbrace{E[Y_{1i} | D_i = 1] - E[Y_{0i} | D_i = 1]}_\text{ATT} + \underbrace{E[Y_{0i} | D_i = 1] -E[Y_{0i} | D_i = 0]}_\text{Sesgo de selección}
\]</div>
<p>Es un truco sucio, ¿lo notaste? Solo incluí el contrafactual como suma y como resta otra vez para no alterar la ecuación. Hacer esto revela que la ecuación inicial incluye el sesgo de selección.</p>
</section>
<section id="el-experimento-aleatorio-ideal">
<h2>El experimento aleatorio ideal<a class="headerlink" href="#el-experimento-aleatorio-ideal" title="Permalink to this heading">#</a></h2>
<p>Hay una manera de eliminar el sesgo de selección.</p>
<p>Los ensayos controlados aleatorizados (RCTs) son experimentos donde nos aseguramos de eliminar todas las variables que podrían afectar nuestro resultado. Los puedes encontrar en inglés como RCTs: <em>Randomized controlled trials. S</em>on el <em>gold standard</em> de los estudios científicos.</p>
<p>Los resultados de un RCT son considerados causales.</p>
<p>Un ejemplo de experimento en economía es el que hicieron Miguel &amp; Kremer (2004) para encontrar los efectos de tratar contra las lombrices a alumnos en las escuelas en Kenya. Al eliminar los parásitos no sólo mejoraron la salud de los alumnos, también aumentaron la participación en clase de las escuelas <strong>y de escuelas cercanas</strong>.</p>
<p>Para hacer un experimento necesitas:</p>
<ul class="simple">
<li><p><strong>Controlar las condiciones del estudio.</strong> En la medida de lo posible, elige hacer tu estudio en grupos que sean comparables y homogéneos.</p></li>
<li><p><strong>Divide en dos grupos: tratamiento y control.</strong> El grupo de tratamiento es donde esperamos ver el efecto, el grupo de control sirve para comparar los resultados.</p></li>
<li><p><strong>Asigna los grupos aleatoriamente.</strong> Todos los participantes en el estudio deben tener la misma probabilidad de pertenecer a cualquier grupo.</p></li>
<li><p>Sigue y analiza tus resultados. Verifica que todo salió de acuerdo al plan y analiza los datos. Veremos más sobre esto a lo largo del libro.</p></li>
</ul>
<p>Cuando un experimento está bien diseñado, no se necesitan modelos estadísticos demasiado complejos.</p>
<p>Desafortunadamente, los experimentos no siempre son posibles de ejecutar. Requieren de planeación, tiempo y recursos que no siempre escalan.</p>
<p>Aún así, diseñar el experimento ideal para identificar el efecto que buscamos es un paso esencial en el diseño de nuestra estrategia de identificación.</p>
</section>
<section id="experimento-ideal-y-experimentos-naturales">
<h2>Experimento ideal y experimentos naturales<a class="headerlink" href="#experimento-ideal-y-experimentos-naturales" title="Permalink to this heading">#</a></h2>
<p>El experimento ideal requiere que imaginemos cómo seguiríamos los pasos para hacer un experimento si no tuviéramos ninguna limitación de recursos, tiempo o incluso ética.</p>
<p>Por ejemplo, el estudio de Dale &amp; Krueger (2002) requeriría que tomáramos a un grupo de estudiantes y mandáramos de manera aleatoria a la mitad a Harvard y registrar los ingresos de los alumnos en ambos grupos al salir.</p>
<p>Pensar en el experimento ideal soluciona la mitad del problema.</p>
<p>Cuando entiendes cuál es el experimento ideal, es más fácil entender la estrategia que debes usar con las limitantes de la vida real. Dale y Krueger no usaron un experimento para encontrar los efectos de entrar a las escuelas selectivas. Lo que hicieron fue una estrategia ingeniosa para que los datos funcionaran como si hubieran hecho un experimento.</p>
<p>Usaron un experimento natural.</p>
<p>Los experimentos naturales son situaciones que encontramos que generan condiciones para analizar un fenómeno. Por ejemplo, Dale &amp; Krueger (2002) aprovecharon a los alumnos que fueron aceptados en escuelas selectivas, pero decidieron no ingresar por motivos externos. Este es un grupo que si se puede comparar con quienes entraron a las universidades selectivas.</p>
<p>No encontraron diferencias significativas por entrar en una universidad selectiva.</p>
<p>Hay una excepción: los alumnos con menos ventajas en su entorno familiar si se beneficiaron de atender a una escuela selectiva. Esto es porque la universidad es una forma de hacer conexiones personales que pueden traer ventajas para toda la vida. Los alumnos con mayor ventaja en su contexto familiar ya tienen acceso a estas conexiones, pero para los menos aventajados, la universidad es una oportunidad significativa.</p>
</section>
<section id="disena-tu-experimento-ideal-con-inteligencia-artificial">
<h2>Diseña tu experimento ideal con Inteligencia Artificial<a class="headerlink" href="#disena-tu-experimento-ideal-con-inteligencia-artificial" title="Permalink to this heading">#</a></h2>
<p>Diseñar el experimento ideal es el primer paso para encontrar la estrategia de identificación.</p>
<p>Para diseñar el experimento natural necesitamos:</p>
<ul class="simple">
<li><p>Encontrar la relación causal que nos interesa.</p></li>
<li><p>Reducir las variables a indicadores para medirlas.</p></li>
</ul>
<p>El resto lo podemos hacer con ayuda de Inteligencia Artificial.</p>
<p>Usaremos chatGPT para este ejercicio.</p>
<p>Algunas advertencias sobre chatGPT:</p>
<ul class="simple">
<li><p>Los modelos grandes de lenguaje (LLM) como chatGPT funcionan como una predicción de la siguiente frase que viene en el texto. Es como el predictor de texto de tu teléfono, pero más avanzado.</p></li>
<li><p>El resultado que obtengas depende del modelo que estés usando (yo muestro el resultado de chatGPT 4, que es el mejor en el mercado en el momento en que escribo esto).</p></li>
<li><p>La mejor manera de obtener buenos resultados con chatGPT es interactuando con lo que te arroja. Pídele modificaciones o agrega información para que corrija, no te quedes con lo primero que te arroja.</p></li>
</ul>
<p>Usa el siguiente comando. Puedes copiar y pegar directamente en chatGPT.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Eres el experto en econometría e inferencia causal.

Diseña el experimento ideal para identificar efecto sobre las variables que te diré a continuación.

Un experimento ideal es una descripción detallada de un experimento que se podría hacer para obtener efectos causales, sin reparos en los recursos, tiempo o dilemas éticos que pueda causar.

Te voy a describir las variables que deseo estudiar y su relación causal que busco identificar. 

Estás listo?
</pre></div>
</div>
<p>A continuación tienes que indicarle las variables que deseas medir. Por ejemplo, yo escribí esto para pedir indicaciones sobre el experimento ideal de las universidades selectivas.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Deseo</span> <span class="n">conocer</span> <span class="n">el</span> <span class="n">efecto</span> <span class="n">de</span> <span class="n">asistir</span> <span class="n">a</span> <span class="n">una</span> <span class="n">universidad</span> <span class="n">selectiva</span> <span class="n">en</span> <span class="n">los</span> <span class="n">ingresos</span>

</pre></div>
</div>
<p>Lee con atención el resultado. Si consideras que lo que describe es algo viable, deberías intentarlo.</p>
<p>Con más experiencia, es buena idea que intentes diseñar estos experimentos ideales por tu cuenta. No sólo es un gran ejercicio mental, probablemente te dará la respuesta sobre la estrategia que debes usar en tu proyecto.</p>
</section>
<section id="apendice">
<h2>Apéndice<a class="headerlink" href="#apendice" title="Permalink to this heading">#</a></h2>
<section id="notacion">
<h3>Notación<a class="headerlink" href="#notacion" title="Permalink to this heading">#</a></h3>
<p>La <span class="math notranslate nohighlight">\(E(\cdot)\)</span> se lee como el <em>valor esperado.</em> Es un concepto más general que simplemente el promedio, pues aplica a más que sólo números.</p>
<p>El valor esperado (o esperanza)</p>
</section>
</section>
<section id="referencias">
<h2>Referencias<a class="headerlink" href="#referencias" title="Permalink to this heading">#</a></h2>
<p>Berg Dale, S. &amp; Krueger A. B. (2002). Estimating the Payoff to Attending a More Selective College: An Application of Selection on Observables and Unobservables. <em>The Quarterly Journal of Economics</em></p>
<p>Busch, P., Heinonen, T., &amp; Lahti, P. (2007). Heisenberg’s uncertainty principle. Physics Reports, 452(6), 155-176. <a class="reference external" href="https://doi.org/10.1016/j.physrep.2007.05.006">https://doi.org/10.1016/j.physrep.2007.05.006</a></p>
<p>Everett, H., III. (1957). “Relative State” Formulation of Quantum Mechanics. <em>Reviews of Modern Physics, 29</em>(3), 454. <a class="reference external" href="https://doi.org/10.1103/RevModPhys.29.454">https://doi.org/10.1103/RevModPhys.29.454</a></p>
<p>Miguel, E. &amp; Kremer, M. (2003). Worms: Identifying Impacts on Education and Health in the Presence of Treatment Externalities. <em>Econometrica</em> 72(1). p. 159-217. <a class="reference external" href="https://doi.org/10.1111/j.1468-0262.2004.00481.x">https://doi.org/10.1111/j.1468-0262.2004.00481.x</a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters/I-Introduccion"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="01-python-para-econometria.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Python para Econometría</p>
      </div>
    </a>
    <a class="right-next"
       href="../II-Modelos-y-Metodos/03-Regresion-Lineal.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Si sólo aprendes un modelo, aprende este: Regresión Lineal</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#en-un-universo-fuiste-a-harvard">En un universo, fuiste a Harvard</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-error-de-novatos">El error de novatos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sesgo-de-seleccion">Sesgo de Selección</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rockstars-de-la-economia-alan-krueger">Rockstars de la economía: Alan Krueger</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-beneficio-de-entrar-a-una-escuela-mas-selectiva">El beneficio de entrar a una escuela más selectiva</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#descubriendo-el-sesgo-de-seleccion">Descubriendo el sesgo de selección</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-experimento-aleatorio-ideal">El experimento aleatorio ideal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experimento-ideal-y-experimentos-naturales">Experimento ideal y experimentos naturales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#disena-tu-experimento-ideal-con-inteligencia-artificial">Diseña tu experimento ideal con Inteligencia Artificial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apendice">Apéndice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notacion">Notación</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias">Referencias</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mario Alberto García Meza
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>